<div class="battle-container">
  <!-- HUD overlay -->
  <div class="hud-overlay" *ngIf="!isGameOver">
    <div class="hud-top">
      <div class="player-info">
        <div class="health-bar-container">
          <div class="health-bar" [style.width.%]="(myHealth / myMaxHealth) * 100"></div>
        </div>
        <div class="health-text">‚ù§Ô∏è {{ myHealth }} / {{ myMaxHealth }}</div>
      </div>
      <div class="players-alive">
        üë• Giocatori vivi: {{ playersAlive }} / {{ totalPlayers }}
      </div>
    </div>
    
    <div class="hud-controls">
      <div class="control-hint">üéÆ WASD - Movimento | SPAZIO - Attacco | ` - Debug</div>
    </div>
  </div>

  <!-- Debug overlay -->
  <div class="debug-overlay" *ngIf="showDebugOverlay && !isGameOver">
    <div class="debug-header">üîç Network Debug</div>
    <div class="debug-metrics">
      <div class="metric">
        <span class="metric-label">FPS:</span>
        <span class="metric-value" [class.critical]="networkStats.avgFPS < 30">
          {{ networkStats.avgFPS }}
        </span>
      </div>
      <div class="metric">
        <span class="metric-label">Server:</span>
        <span class="metric-value">{{ networkStats.serverTickRate }}Hz</span>
      </div>
      <div class="metric">
        <span class="metric-label">Ping:</span>
        <span class="metric-value" [class.warning]="networkStats.avgPing > 100" [class.critical]="networkStats.avgPing > 150">
          {{ networkStats.avgPing }}ms
        </span>
      </div>
      <div class="metric">
        <span class="metric-label">Loss:</span>
        <span class="metric-value" [class.warning]="networkStats.packetLossPercent > 2" [class.critical]="networkStats.packetLossPercent > 5">
          {{ networkStats.packetLossPercent }}%
        </span>
      </div>
      <div class="metric">
        <span class="metric-label">Pred Error:</span>
        <span class="metric-value" [class.warning]="networkStats.avgPredictionError > 0.5">
          {{ networkStats.avgPredictionError.toFixed(2) }}u
        </span>
      </div>
      <div class="metric">
        <span class="metric-label">Interpolating:</span>
        <span class="metric-value">{{ networkStats.playersInterpolating }}/{{ networkStats.totalPlayers - 1 }}</span>
      </div>
    </div>
  </div>

  <!-- Victory overlay -->
  <div class="victory-overlay" *ngIf="hasWon && isGameOver">
    <div class="victory-content">
      <h1 class="victory-title">HAI VINTO! üèÜ</h1>
      <p class="redirect-message">Ritorno alla home tra 10 secondi...</p>
    </div>
  </div>

  <!-- Defeat overlay -->
  <div class="defeat-overlay" *ngIf="isDead">
    <div class="defeat-content">
      <h1 class="defeat-title">HAI PERSO ‚ò†Ô∏è</h1>
    </div>
  </div>

  <!-- Game over overlay (per altri casi) -->
  <div class="game-over-overlay" *ngIf="isGameOver && !hasWon && !isDead">
    <div class="game-over-content">
      <h1>üèÜ PARTITA TERMINATA!</h1>
      <div class="winner-info">
        <p class="winner-label">Vincitore:</p>
        <p class="winner-name">{{ winner || 'Sconosciuto' }}</p>
      </div>
      <p class="redirect-message">Ritorno alla home tra 10 secondi...</p>
    </div>
  </div>

  <!-- Canvas fullscreen -->
  <div id="threejs-canvas"></div>
</div>
